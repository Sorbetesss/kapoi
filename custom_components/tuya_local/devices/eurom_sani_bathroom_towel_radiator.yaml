name: Eurom Sani-Bathroom-Radiator Towel Wifi heater
primary_entity:
  entity: climate
  translation_key: heater
  dps:
    - id: 1
      type: boolean
      name: hvac_mode
      mapping:
        - dps_val: false
          value: "off"
        - dps_val: true
          constraint: mode
          conditions:
            - dps_val: "r"
              value: "heat"
            - dps_val: "t"
              value: "dry"
              icon: "mdi:hanger"
    - id: 2
      type: integer
      name: temperature
      range:
        min: 0
        max: 37
      mapping:
        - constraint: mode
          conditions:
            - dps_val: "t"
              value_redirect: towel_dry_temperature
              range:
                min: 40
                max: 70
    - id: 333
      # dummy variable for current temperature of 
      # current mode (room / towel) while keeping
      # both measured values available
      type: integer
      name: current_temperature
      optional: true
      # read_only: true
      mapping:
        - constraint: mode
          conditions:
            - dps_val: "t"
              value_mirror: heater_temperature
            - dps_val: "r"
              value_mirror: room_temperature
    - id: 3
      type: integer
      name: room_temperature
    - id: 12
      name: error
      type: bitfield
      mapping:
        - dps_val: 0
          value: "OK"
    - id: 101
      type: string
      name: hvac_action
      mapping:
        - dps_val: true
          constraint: mode
          conditions:
            - dps_val: "r"
              value: heating
            - dps_val: "t"
              value: drying
        - dps_val: false
          value: idle
          constraint: hvac_mode
          conditions:
            - dps_val: false
              value: "off"
    - id: 4
      name: mode
      type: string
      mapping:
        - dps_val: r
          value: room
        - dps_val: t
          value: towel
    - id: 105
      name: heater_temperature
      type: integer
      hidden: false
      optional: true
    - id: 106
      name: towel_dry_temperature
      type: integer
      hidden: true
      optional: true
      range:
        min: 40
        max: 70
    - id: 102
      name: preset_mode
      type: boolean
      mapping:
        - dps_val: false
          constraint: frost_mode
          conditions:
            - dps_val: false
              value: "none"
            - dps_val: true
              # todo; icon
              value: "Anti-frost"
        - dps_val: true
          value: "eco"
    - id: 103
      name: frost_mode
      type: boolean
      hidden: true
